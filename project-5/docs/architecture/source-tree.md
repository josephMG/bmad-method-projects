# Source Tree Structure for BMad-FamilyExpenseTracker

This document outlines the recommended source tree structure and conventions for the `BMad-FamilyExpenseTracker` Flutter project. A consistent and modular structure enhances maintainability, scalability, and developer collaboration.

## 1. Top-Level Project Structure

The project will follow a standard Flutter project layout, with key directories:

```
family_expense_tracker/
├── .dart_tool/          # Generated by Flutter
├── .idea/               # IDE configuration
├── android/             # Android specific files
├── ios/                 # iOS specific files
├── lib/                 # **Application source code**
├── linux/               # Linux specific files
├── macos/               # macOS specific files
├── test/                # Unit and widget tests
├── web/                 # Web specific files
├── windows/             # Windows specific files
├── pubspec.yaml         # Project dependencies and metadata
├── pubspec.lock         # Exact versions of dependencies
├── README.md            # Project overview
└── ...
```

## 2. `lib/` Directory Structure

The `lib/` directory will house the main application source code, organized into a modular and feature-driven structure. This promotes separation of concerns and makes it easier to locate and manage code.

```
lib/
├── main.dart            # Main entry point of the application
├── app.dart             # Root widget, theme, routing setup
├── core/                # Core utilities, constants, extensions, base classes
│   ├── constants/       # Application-wide constants
│   ├── errors/          # Custom error classes and exception handling
│   ├── utils/           # General utility functions
│   └── widgets/         # Reusable generic widgets
├── data/                # Data layer: repositories, data sources, models
│   ├── models/          # Data models (e.g., Expense, Category)
│   ├── repositories/    # Abstract interfaces for data operations
│   │   ├── category_repository.dart
│   │   └── expense_repository.dart
│   └── datasources/     # Implementations of data sources (e.g., GoogleSheetsApiDataSource)
│       ├── google_sheets_category_datasource.dart
│       └── google_sheets_expense_datasource.dart
├── features/            # Feature-driven organization (e.g., authentication, expenses, categories)
│   ├── authentication/  # Google OAuth integration, user management
│   │   └── data/
│   │       └── auth_repository.dart        # Concrete implementation of AuthRepository
│   └── expenses/        # Expense listing, adding, editing, deleting
│       └── data/
│           # expense_repository.dart was moved/deleted
├── presentation/        # UI layer: widgets, pages, state management
│   ├── pages/           # Top-level screens/pages
│   │   ├── authentication_page.dart
│   │   └── expense_list_page.dart
│   ├── widgets/         # Reusable UI components specific to features
│   │   ├── category_list.dart
│   │   ├── expense_form_dialog.dart
│   │   └── expense_list.dart
│   └── providers/       # Riverpod/Provider definitions for global state
│       ├── category_provider.dart
│       ├── expense_provider.dart
│       └── month_provider.dart
└── services/            # External services (e.g., Google Sheets API client)
    └── google_sheets_service.dart
```

## 3. Testing Directory (`test/`)

The `test/` directory mirrors the `lib/` structure for unit and widget tests, with a dedicated `mock/` subdirectory for generated mock files.

```
test/
├── data/
│   ├── datasources/
│   │   ├── google_sheets_category_datasource_test.dart
│   │   ├── google_sheets_expense_datasource_delete_test.dart
│   │   └── google_sheets_expense_datasource_test.dart
│   └── models/
│       ├── category_test.dart
│       └── expense_record_test.dart
├── features/
│   └── authentication/
│       └── data/
│           └── auth_repository_test.dart
├── integration/
│   └── google_auth_integration_test.dart
├── mock/                # Centralized generated mock files
│   ├── auth_mocks.dart
│   ├── auth_mocks.mocks.dart
│   ├── expense_mocks.dart
│   ├── expense_mocks.mocks.dart
│   ├── google_sheets_service_mocks.dart
│   └── google_sheets_service_mocks.mocks.dart
├── presentation/
│   ├── pages/
│   │   ├── authentication_page_test.dart
│   │   └── expense_list_page_test.dart
│   ├── providers/
│   │   ├── category_provider_test.dart
│   │   └── month_provider_test.dart
│   └── widgets/
│       ├── category_list_test.dart
│       └── expense_form_test.dart
├── services/
│   └── google_sheets_service_test.dart
```

## 4. Assets (`assets/`)

*   Images, fonts, and other assets will be stored in an `assets/` directory at the project root, with subdirectories for organization (e.g., `assets/images/`, `assets/icons/`).

## 5. Documentation (`docs/`)

*   Project documentation, including PRDs, architecture documents, and other relevant information, will reside in the `docs/` directory.