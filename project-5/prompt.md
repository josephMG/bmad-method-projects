# 🧩 BMad-Method 提示 — Flutter 家庭開支追蹤器

## 🎯 專案概覽

**專案名稱:** `BMad-FamilyExpenseTracker`  
**目標:**  
開發一個跨平台 (iOS / Android) 的 Flutter 家庭開支追蹤應用程式，該應用程式與 Google Sheets 同步，使家庭成員能夠協同管理和查看每月支出。

---

## 🧱 系統摘要

這個專案是一個多用戶共享的開支追蹤應用程式。  
用戶可以記錄、查看和修改每月支出數據，所有數據都與 Google Sheets 實時同步。  
每月的開支將自動保存到以年和月命名的標籤中（例如 `2025-10`），  
用戶可以直接在應用程式中瀏覽不同月份的記錄和總支出。

---

## ⚙️ 技術棧

| 模組                | 技術                     |
| --------------------- | ------------------------------ |
| 前端              | Flutter 3.x                    |
| 平台              | iOS / Android                  |
| 後端 / 儲存     | Google Sheets API (雲端同步) |
| 認證                  | Google OAuth                   |
| 數據層            | REST API + GSheets 套件     |
| 狀態管理      | Riverpod 或 Provider           |
| UI                    | Material 3 設計              |
| 圖表 / 可視化 | fl_chart (未來增強)  |

---

## 🧭 功能需求

### 1️⃣ 應用程式平台

- 使用 Flutter 構建，支援 iOS 和 Android。

### 2️⃣ 類別管理

- 所有開支類別都儲存在第一個名為 `Category` 的 Google Sheet 標籤中。
- 每個類別包括：`CategoryName` 和可選的 `ColorCode`。
- 在 Google Sheets 中添加、刪除或編輯類別應自動與應用程式同步。

### 3️⃣ 每月數據結構

- 每個月都有自己的 Google Sheet 標籤，命名格式為 `YYYY-MM`。
- 每個標籤儲存該月份的開支記錄。

### 4️⃣ 開支記錄格式

每條記錄應包含以下字段：

| 字段    | 描述                                   |
| -------- | --------------------------------------------- |
| 日期     | 日期 (YYYY-MM-DD)                             |
| 名稱     | 項目名稱 (例如 早餐, 學費)           |
| 類別 | 開支類別 (與 `Category` 標籤匹配) |
| 金額   | 支出金額 (整數或浮點數)               |

操作：

- 用戶可以在應用程式中**添加 / 刪除 / 修改**記錄。
- 更新會寫回對應月份的 Google Sheet 標籤。

### 5️⃣ 開支列表

- 顯示所有當月記錄 (按日期排序)。
- 每條記錄顯示：日期、名稱、類別和金額。
- 底部顯示**每月總支出**。
- 支援滑動刪除和長按編輯操作。

### 6️⃣ 月份導航

- 提供一個**月份導航器** UI 組件。
- 用戶可以：
  - 快速導航到上一個或下一個月。
  - 使用月份選擇器直接跳轉到特定月份。
- 當切換月份時，應用程式會自動從對應的 Google Sheet 標籤加載數據。

### 7️⃣ Google Sheet 同步

- 應用程式在啟動時自動加載類別和當月數據。
- 如果用戶直接編輯工作表，應用程式可以刷新以同步更改。
- 初始版本支援手動同步；自動後台同步可在以後添加。

---

## 🧮 數據模式 (供分析師參考)

### 工作表: `Category`

| CategoryName  | ColorCode |
| ------------- | --------- |
| 食物          | #F5EBAF   |
| 家庭用品     | #D6F7B0   |
| 醫療       | #D0C7E6   |
| 教育     | #EFD2B5   |
| 娛樂 | #F0B6B9   |
| 學習      | #B9D8F0   |
| 禮物         | #FFD8B0   |
| 其他        | #E8E8E8   |

### 工作表: `2025-10`

| 日期       | 名稱          | 類別      | 金額 |
| ---------- | ------------- | ------------- | ------ |
| 2025-10-03 | 早餐     | 食物          | 80     |
| 2025-10-04 | 午餐         | 食物          | 120    |
| 2025-10-05 | 娛樂 | 娛樂          | 500    |
| …          | …             | …             | …      |

---

## 💡 未來擴展

- 支援 Google Drive JSON 配置同步 (方便更改工作表)
- 離線緩存 + 自動同步
- 將 Google Sheet 替換為 Python FastAPI 服務器和 PostgreSQL
  - 家庭帳戶登錄 / 基於角色的權限
  - 支出 CRUD
  - 類別 CRUD
  - 將報告導出為 CSV / PDF
  - 添加視覺分析 (餅圖 / 條形圖)

---

## 🧠 提示角色

**角色:** `BMad-Method 分析師代理`  
**目標:**  
分析上述規範並生成完整的 PRD 文檔以及可供進一步編排的開發就緒任務分解。